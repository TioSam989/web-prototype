import"./modulepreload-polyfill.c7c6310f.js";/* empty css                  */(function(){const e="on",n="out",s="body",o="stop",c="click",a="apply",d="target",m="prototype",h="Propagation",g="setAttribute",y="relatedTarget",S="addEventListener",f=Symbol(n),x=Object,E=document,H=typeof TouchEvent<"u"?TouchEvent:void 0,w=HTMLElement,T=w[m],C=Event[m],D=[c,"dbl"+c,"mousedown","mouseup","touchstart","touchend","pointerdown","pointerup"],U=new Set(D),$=new Set(D.map(t=>e+t+n)),M=(t,r)=>!!r&&t instanceof r,k=(t,r)=>t.contains(r),p=(t,r)=>{for(let i of t)r(i)},A=t=>{M(t,w)&&(t[f]?_(t):p(U,r=>{let i=e+r+n,v=t.getAttribute(i);v&&!B(t)[i]&&t[g](i,v)}),p(t.childNodes,A))},B=t=>t[f]=t[f]||{},_=t=>{B(t),b.includes(t)||(b.push(t),R=!0)},X=(t,r)=>k(r,t)?1:k(t,r)?-1:0,Y=t=>{R&&(b.sort(X),R=!1);let r=t[d];M(t,H)?(t=new H(t.type+n,t))[y]=r:t=new t.constructor(t.type+n,x.assign({},t,{[y]:r})),t[o]=[],p(b,i=>{k(i,r)||t[o].some(v=>k(v,i))||i.dispatchEvent(t)})},F=t=>function(){let r=this,i=r.type;t[a](r),$.has(e+i)&&r[o].push(r[d])},j=(t,r,i)=>t[r]=i(t[r]);function Z(t){let r=this[f][e+t.type];r&&r[a](this,[t])}let b=[],R=!1,G=E.createElement(s);p(U,t=>{E[S](t,Y,{passive:!0,capture:!0});let r=e+t+n;x.defineProperty(T,r,{get(){return this[f][r]},set(i){this[S](t+n,Z),this[f][r]=typeof i=="object"?i.handleEvent:i}})}),j(T,S,t=>function(...r){$.has(e+r[0])&&_(this),t[a](this,r)}),j(T,g,t=>function(r,i){$.has(r)?(t[a](G,[e+c,i]),this[r]=G[e+c]):t[a](this,[r,i])}),j(C,o+h,F),j(C,o+"Immediate"+h,F),new MutationObserver(t=>{p(t,r=>{p(r.addedNodes,A),p(r.removedNodes,i=>{M(i,w)&&(b=b.filter(v=>!k(i,v)))})})}).observe(E.documentElement,{childList:!0,subtree:!0}),A(E[s])})();const K="0394adacbab6526b446f377465aae302",u=document.querySelector("#musicName");document.querySelector("#artistName");document.querySelector("#searchBtn");const l=document.querySelector("#listResults"),O=J(l),N=J(O),z=document.querySelector("#appMusicRec"),ee=te(Q,0),q={first:"audioscrobbler",second:"musicovery",third:"spotify"};function J(e){return e.parentNode}function te(e,n=1){let s;return function(...o){clearTimeout(s),s=setTimeout(()=>{e(...o)},n)}}function Q(e,n){if(l.value="",e!=""){const s=`https://ws.audioscrobbler.com/2.0/?method=track.search&track=${e}&api_key=0394adacbab6526b446f377465aae302&format=json&limit=${n}`;fetch(s,{method:"get",mode:"cors",cache:"no-store",timeout:1e3}).then(c=>{c.json().then(a=>{let d=Object.values(a)[0],m=Object.values(d)[4],h=Object.values(m)[0],g=[];Object.keys(h).map(function(y){let S={name:ne(h[y].name),artist:h[y].artist};g.push(S),oe(g,n).map(f=>se(f))})}).catch(a=>console.error(`i'm broke: ${a.message}`))})}}function ne(e){let n=e.replace(/\s*\(.*?\)\s*/g,"");return n!=""||n!=null?n:e}function re(e,n,s){const o=`https://ws.audioscrobbler.com/2.0/?method=track.getsimilar&track=${e}&artist=${n}&api_key=${K}&limit=${s}&format=json&autocorrect=1`;return fetch(o,{method:"GET",mode:"cors",cache:"default"}).then(a=>a.json().then(d=>d)).catch(a=>ie(a.message))}function oe(e,n){l.innerHTML="";let s=[...new Set(e)];for(let o=s.length;o>n;o--)s.shift();return s}function se(e){let n=document.createElement("option");n.value=`${e.name},${e.artist}`,n.text=`${e.name} from ${e.artist}`,n.setAttribute("id",`${e.name}-${e.artist}`),l.appendChild(n)}function ie(e){let n=document.createElement("option");n.text="music not found",console.warn(e),l.appendChild(n)}function L(e){return e.replaceAll(" ","+")}function I(e){e.removeAttribute("hidden","hidden")}function ae(e,n,s){if(n==q.first){let o=Object.values(e)[0],c=Object.values(o)[0],a=[];return Object.keys(c).map(function(d){let m={name:c[d].name,artist:c[d].artist.name};a.push(m)}),a}else if(n==q.second)if(s){let o=Object.values(obj)[2],c=Object.values(o)[0];Object.keys(c).map(function(a){c[a].title,c[a].artist.name,c[a].id})}else{let o=Object.values(obj),c=Object.values(o[2]);return{name:c[1],artist:c[4].name,id:c[0]}}}function ce(e,n){let s=[...new Set(e)];for(let o=s.length;o>n;o--)s.shift();if(e==null||!e)throw"list indefinied";return s}function ue(e){let n=e.split(""),s=[];for(let o=0;o<n.length;o++)n[o]!=" "&&s.push(n[o]);return s}function V(e){return!(e==null||e==null)}function P(e){if(V(e)==!1)return!1;{let n=[];return n=ue(e),n.length!=0}}function le(e){console.log(e),z.innerHTML+=`<p>Listen to ${e.name} from ${e.artist} </p>`}function de(){z.innerHTML=""}async function W(e){u.value=`${e.name}`;try{const n=await re(L(e.name),L(e.artist),5);let s=ce(ae(n,q.first,5),5);try{de(),s.map(o=>{le(o)})}catch(o){console.error(o)}}catch(n){console.error(n)}}l.addEventListener("change",function(){let n=l.value.split(","),s={name:n[0],artist:n[1]};W(s)});u.addEventListener("keypress",e=>{if(e.key==="Enter")if(V(u.value)==!1){let n=document.createElement("option");n.text="empty",l.appendChild(n)}else{let s=l[0].value.split(","),o={name:s[0],artist:s[1]};W(o)}});u.addEventListener("focus",e=>{P(u.value)==!0&&(l.childElementCount==0?ee(L(u.value),5):I(O))});N.addEventListener("clickout",e=>{});N.addEventListener("mouseover",e=>{P(u.value)==!0&&I(O)});N.addEventListener("mouseout",e=>{});u.addEventListener("input",e=>{P(u.value)==!1||(I(O),Q(L(u.value),5))});
