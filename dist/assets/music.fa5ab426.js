import"./modulepreload-polyfill.c7c6310f.js";/* empty css                  */(function(){const e="on",n="out",i="body",o="stop",c="click",a="apply",p="target",L="prototype",h="Propagation",g="setAttribute",y="relatedTarget",E="addEventListener",f=Symbol(n),x=Object,w=document,C=typeof TouchEvent<"u"?TouchEvent:void 0,j=HTMLElement,A=j[L],D=Event[L],H=[c,"dbl"+c,"mousedown","mouseup","touchstart","touchend","pointerdown","pointerup"],U=new Set(H),T=new Set(H.map(t=>e+t+n)),M=(t,r)=>!!r&&t instanceof r,S=(t,r)=>t.contains(r),m=(t,r)=>{for(let s of t)r(s)},R=t=>{M(t,j)&&(t[f]?_(t):m(U,r=>{let s=e+r+n,v=t.getAttribute(s);v&&!B(t)[s]&&t[g](s,v)}),m(t.childNodes,R))},B=t=>t[f]=t[f]||{},_=t=>{B(t),b.includes(t)||(b.push(t),q=!0)},W=(t,r)=>S(r,t)?1:S(t,r)?-1:0,X=t=>{q&&(b.sort(W),q=!1);let r=t[p];M(t,C)?(t=new C(t.type+n,t))[y]=r:t=new t.constructor(t.type+n,x.assign({},t,{[y]:r})),t[o]=[],m(b,s=>{S(s,r)||t[o].some(v=>S(v,s))||s.dispatchEvent(t)})},F=t=>function(){let r=this,s=r.type;t[a](r),T.has(e+s)&&r[o].push(r[p])},O=(t,r,s)=>t[r]=s(t[r]);function Y(t){let r=this[f][e+t.type];r&&r[a](this,[t])}let b=[],q=!1,G=w.createElement(i);m(U,t=>{w[E](t,X,{passive:!0,capture:!0});let r=e+t+n;x.defineProperty(A,r,{get(){return this[f][r]},set(s){this[E](t+n,Y),this[f][r]=typeof s=="object"?s.handleEvent:s}})}),O(A,E,t=>function(...r){T.has(e+r[0])&&_(this),t[a](this,r)}),O(A,g,t=>function(r,s){T.has(r)?(t[a](G,[e+c,s]),this[r]=G[e+c]):t[a](this,[r,s])}),O(D,o+h,F),O(D,o+"Immediate"+h,F),new MutationObserver(t=>{m(t,r=>{m(r.addedNodes,R),m(r.removedNodes,s=>{M(s,j)&&(b=b.filter(v=>!S(s,v)))})})}).observe(w.documentElement,{childList:!0,subtree:!0}),R(w[i])})();const Z="0394adacbab6526b446f377465aae302",u=document.querySelector("#musicName");document.querySelector("#artistName");document.querySelector("#searchBtn");const l=document.querySelector("#listResults"),d=J(l),N=J(d),ee=document.querySelector("#appMusicRec"),te=ne(K,0),z={first:"audioscrobbler"};function J(e){return e.parentNode}function ne(e,n=1){let i;return function(...o){clearTimeout(i),i=setTimeout(()=>{e(...o)},n)}}function K(e,n){if(l.value="",e=="")k(d);else{const i=`https://ws.audioscrobbler.com/2.0/?method=track.search&track=${e}&api_key=0394adacbab6526b446f377465aae302&format=json&limit=${n}`;fetch(i,{method:"get",mode:"cors",cache:"no-store",timeout:1e3}).then(c=>{c.json().then(a=>{let p=Object.values(a)[0],L=Object.values(p)[4],h=Object.values(L)[0],g=[];Object.keys(h).map(function(y){let E={name:re(h[y].name),artist:h[y].artist};g.push(E),ie(g,n).map(f=>se(f))})}).catch(a=>console.error(`i'm broke: ${a.message}`))})}}function re(e){let n=e.replace(/\s*\(.*?\)\s*/g,"");return n!=""||n!=null?n:e}function oe(e,n,i){const o=`https://ws.audioscrobbler.com/2.0/?method=track.getsimilar&track=${e}&artist=${n}&api_key=${Z}&limit=${i}&format=json&autocorrect=1`;return fetch(o,{method:"GET",mode:"cors",cache:"default"}).then(a=>a.json().then(p=>p)).catch(a=>ae(a.message))}function ie(e,n){l.innerHTML="";let i=[...new Set(e)];for(let o=i.length;o>n;o--)i.shift();return i}function se(e){let n=document.createElement("option");n.value=`${e.name},${e.artist}`,n.text=`${e.name} from ${e.artist}`,n.setAttribute("id",`${e.name}-${e.artist}`),l.appendChild(n)}function ae(e){let n=document.createElement("option");n.text="music not found",console.warn(e),l.appendChild(n)}function $(e){return e.replaceAll(" ","+")}function k(e){e.setAttribute("hidden","hidden")}function I(e){e.removeAttribute("hidden","hidden")}function ce(e,n){if(n==z.first){let i=Object.values(e)[0],o=Object.values(i)[0],c=[];return Object.keys(o).map(function(a){let p={name:o[a].name,artist:o[a].artist.name};c.push(p)}),c}}function ue(e,n){let i=[...new Set(e)];for(let o=i.length;o>n;o--)i.shift();if(e==null||!e)throw"list indefinied";return i}function le(e){let n=e.split(""),i=[];for(let o=0;o<n.length;o++)n[o]!=" "&&i.push(n[o]);return i}function Q(e){return!(e==null||e==null)}function P(e){if(Q(e)==!1)return!1;{let n=[];return n=le(e),n.length!=0}}function de(e){console.log(e),ee.innerHTML+=`<p>Listen to ${e.name} from ${e.artist} </p>`}async function V(e){k(d),u.value=`${e.name}`;try{const n=await oe($(e.name),$(e.artist),5);let i=ue(ce(n,z.first,5),5);try{i.map(o=>{de(o)})}catch(o){console.error(o)}}catch(n){console.error(n)}}l.addEventListener("change",function(){let n=l.value.split(","),i={name:n[0],artist:n[1]};V(i)});u.addEventListener("keypress",e=>{if(e.key==="Enter")if(Q(u.value)==!1){let n=document.createElement("option");n.text="empty",l.appendChild(n)}else{let i=l[0].value.split(","),o={name:i[0],artist:i[1]};V(o)}});u.addEventListener("focus",e=>{P(u.value)==!0&&(l.childElementCount==0?te($(u.value),5):I(d))});N.addEventListener("clickout",e=>{k(d)});N.addEventListener("mouseover",e=>{P(u.value)==!0&&I(d)});N.addEventListener("mouseout",e=>{k(d)});u.addEventListener("input",e=>{P(u.value)==!1?k(d):(I(d),K($(u.value),5))});
