import"./modulepreload-polyfill.c7c6310f.js";/* empty css                  */const $="0394adacbab6526b446f377465aae302",r=document.querySelector("#musicName");document.querySelector("#artistName");document.querySelector("#searchBtn");const a=document.querySelector("#listResults");function g(e,t){if(a.value="",e=="")p(a);else{const n=`https://ws.audioscrobbler.com/2.0/?method=track.search&track=${e}&api_key=0394adacbab6526b446f377465aae302&format=json&limit=${t}`;console.log(n),fetch(n,{method:"get",mode:"cors",cache:"no-store",timeout:1e3}).then(b=>{b.json().then(o=>{let d=Object.values(o)[0],f=Object.values(d)[4],s=Object.values(f)[0],i=[];Object.keys(s).forEach(function(c){let m={name:j(s[c].name),artist:s[c].artist};i.push(m),v(i,t).forEach(h=>O(h))})}).catch(o=>console.log(`i'm broke: ${o.message}`))})}}function j(e){let t=e.replace(/\s*\(.*?\)\s*/g,"");return t!=""||t!=null?t:e}function L(e,t,n){const l=`https://ws.audioscrobbler.com/2.0/?method=track.getsimilar&track=${e}&artist=${t}&api_key=${$}&limit=${n}&format=json&autocorrect=1`;fetch(l,{method:"GET",mode:"cors",cache:"default"}).then(o=>{o.json().then(d=>{let f=Object.values(d)[0],s=Object.values(f)[0],i=[];Object.keys(s).forEach(function(c){let m={name:s[c].name,artist:s[c].artist.name};i.push(m),v(i,n).forEach(h=>console.log(h))})})}).catch(o=>y(o.message))}function v(e,t){a.innerHTML="";for(let n=e.length;n>t;n--)musicList.shift();return e}function O(e){let t=document.createElement("option");t.value=`${e.name},${e.artist}`,t.text=`${e.name} from ${e.artist}`,t.setAttribute("id",`${e.name}-${e.artist}`),a.appendChild(t)}function y(e){let t=document.createElement("option");t.text="music not found",console.warn(e),a.appendChild(t)}function u(e){return e.replaceAll(" ","+")}function p(e){e.hasAttribute("hidden")||S(e.value)==!1&&e.setAttribute("hidden","hidden")}function k(e){e.removeAttribute("hidden","hidden")}function E(e){p(a),r.value=`${e.name}`,L(u(e.name),u(e.artist),3)}function S(e){let t=[];e.split("");for(let n=0;n<e.length;n++)e[n]!=" "&&t.push(Element);return t.length!=0}a.addEventListener("change",function(){let t=a.value.split(","),n={name:t[0],artist:t[1]};E(n)});r.addEventListener("keypress",e=>{if(e.key==="Enter")if(r.value==""){let t=document.createElement("option");t.text="empty",a.appendChild(t)}else{let n=a[0].value.split(","),l={name:n[0],artist:n[1]};E(l)}});r.addEventListener("focus",e=>{g(u(r.value),5),r.value!=""&&k(a)});r.addEventListener("blur",e=>{});r.addEventListener("input",e=>{r.value==""||r.value==null?p(a):S(r.value)==!0&&(k(a),g(u(r.value),5))});
