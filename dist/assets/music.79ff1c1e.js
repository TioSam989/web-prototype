import"./modulepreload-polyfill.c7c6310f.js";/* empty css                  */const $="0394adacbab6526b446f377465aae302",r=document.querySelector("#musicName");document.querySelector("#artistName");document.querySelector("#searchBtn");const a=document.querySelector("#listResults");function g(e,t){if(a.value="",e=="")b(a);else{const n=`https://ws.audioscrobbler.com/2.0/?method=track.search&track=${e}&api_key=0394adacbab6526b446f377465aae302&format=json&limit=${t}`;console.clear(),console.log(n),fetch(n,{method:"get",mode:"cors",cache:"no-store",timeout:1e3}).then(f=>{f.json().then(s=>{let m=Object.values(s)[0],h=Object.values(m)[4],l=Object.values(h)[0],i=[];Object.keys(l).forEach(function(c){let p={name:j(l[c].name),artist:l[c].artist};i.push(p),v(i,t).forEach(u=>y(u))})}).catch(s=>console.log(`i'm broke: ${s.message}`))})}}function j(e){let t=e.replace(/\s*\(.*?\)\s*/g,"");return t!=""||t!=null?t:e}function O(e,t,n){const o=`https://ws.audioscrobbler.com/2.0/?method=track.getsimilar&track=${e}&artist=${t}&api_key=${$}&limit=${n}&format=json&autocorrect=1`,f={method:"GET",mode:"cors",cache:"default"};console.log(o),fetch(o,f).then(s=>{s.json().then(m=>{let h=Object.values(m)[0],l=Object.values(h)[0];l.length==0&&console.log("call option b ");let i=[];Object.keys(l).forEach(function(c){let p={name:l[c].name,artist:l[c].artist.name};i.push(p);let u=v(i,n);Object.keys(u).length==n&&console.table(u)})})}).catch(s=>A(s.message))}function v(e,t){a.innerHTML="";let n=[...new Set(e)];for(let o=n.length;o>t;o--)n.shift();return n}function y(e){let t=document.createElement("option");t.value=`${e.name},${e.artist}`,t.text=`${e.name} from ${e.artist}`,t.setAttribute("id",`${e.name}-${e.artist}`),a.appendChild(t)}function A(e){let t=document.createElement("option");t.text="music not found",console.warn(e),a.appendChild(t)}function d(e){return e.replaceAll(" ","+")}function b(e){e.hasAttribute("hidden")||S(e.value)==!1&&e.setAttribute("hidden","hidden")}function k(e){e.removeAttribute("hidden","hidden")}function E(e){b(a),r.value=`${e.name}`,O(d(e.name),d(e.artist),5)}function S(e){let t=[];e.split("");for(let n=0;n<e.length;n++)e[n]!=" "&&t.push(Element);return t.length!=0}a.addEventListener("change",function(){let t=a.value.split(","),n={name:t[0],artist:t[1]};E(n)});r.addEventListener("keypress",e=>{if(e.key==="Enter")if(r.value==""){let t=document.createElement("option");t.text="empty",a.appendChild(t)}else{let n=a[0].value.split(","),o={name:n[0],artist:n[1]};E(o)}});r.addEventListener("focus",e=>{g(d(r.value),5),r.value!=""&&k(a)});r.addEventListener("blur",e=>{});r.addEventListener("input",e=>{r.value==""||r.value==null?b(a):S(r.value)==!0&&(k(a),g(d(r.value),5))});
