import"./modulepreload-polyfill.c7c6310f.js";/* empty css                  */(function(){const e="on",n="out",o="body",i="stop",c="click",a="apply",f="target",w="prototype",h="Propagation",g="setAttribute",y="relatedTarget",E="addEventListener",p=Symbol(n),x=Object,L=document,C=typeof TouchEvent<"u"?TouchEvent:void 0,A=HTMLElement,$=A[w],D=Event[w],U=[c,"dbl"+c,"mousedown","mouseup","touchstart","touchend","pointerdown","pointerup"],B=new Set(U),T=new Set(U.map(t=>e+t+n)),M=(t,r)=>!!r&&t instanceof r,S=(t,r)=>t.contains(r),m=(t,r)=>{for(let s of t)r(s)},N=t=>{M(t,A)&&(t[p]?_(t):m(B,r=>{let s=e+r+n,v=t.getAttribute(s);v&&!H(t)[s]&&t[g](s,v)}),m(t.childNodes,N))},H=t=>t[p]=t[p]||{},_=t=>{H(t),b.includes(t)||(b.push(t),q=!0)},W=(t,r)=>S(r,t)?1:S(t,r)?-1:0,X=t=>{q&&(b.sort(W),q=!1);let r=t[f];M(t,C)?(t=new C(t.type+n,t))[y]=r:t=new t.constructor(t.type+n,x.assign({},t,{[y]:r})),t[i]=[],m(b,s=>{S(s,r)||t[i].some(v=>S(v,s))||s.dispatchEvent(t)})},F=t=>function(){let r=this,s=r.type;t[a](r),T.has(e+s)&&r[i].push(r[f])},O=(t,r,s)=>t[r]=s(t[r]);function Y(t){let r=this[p][e+t.type];r&&r[a](this,[t])}let b=[],q=!1,G=L.createElement(o);m(B,t=>{L[E](t,X,{passive:!0,capture:!0});let r=e+t+n;x.defineProperty($,r,{get(){return this[p][r]},set(s){this[E](t+n,Y),this[p][r]=typeof s=="object"?s.handleEvent:s}})}),O($,E,t=>function(...r){T.has(e+r[0])&&_(this),t[a](this,r)}),O($,g,t=>function(r,s){T.has(r)?(t[a](G,[e+c,s]),this[r]=G[e+c]):t[a](this,[r,s])}),O(D,i+h,F),O(D,i+"Immediate"+h,F),new MutationObserver(t=>{m(t,r=>{m(r.addedNodes,N),m(r.removedNodes,s=>{M(s,A)&&(b=b.filter(v=>!S(s,v)))})})}).observe(L.documentElement,{childList:!0,subtree:!0}),N(L[o])})();const Z="0394adacbab6526b446f377465aae302",l=document.querySelector("#musicName");document.querySelector("#artistName");document.querySelector("#searchBtn");const u=document.querySelector("#listResults"),d=J(u),I=J(d),ee=te(K,0),z={first:"audioscrobbler"};function J(e){return e.parentNode}function te(e,n=1){let o;return function(...i){clearTimeout(o),o=setTimeout(()=>{e(...i)},n)}}function K(e,n){if(u.value="",e=="")k(d);else{const o=`https://ws.audioscrobbler.com/2.0/?method=track.search&track=${e}&api_key=0394adacbab6526b446f377465aae302&format=json&limit=${n}`;fetch(o,{method:"get",mode:"cors",cache:"no-store",timeout:1e3}).then(c=>{c.json().then(a=>{let f=Object.values(a)[0],w=Object.values(f)[4],h=Object.values(w)[0],g=[];Object.keys(h).map(function(y){let E={name:ne(h[y].name),artist:h[y].artist};g.push(E),oe(g,n).map(p=>ie(p))})}).catch(a=>console.error(`i'm broke: ${a.message}`))})}}function ne(e){let n=e.replace(/\s*\(.*?\)\s*/g,"");return n!=""||n!=null?n:e}function re(e,n,o){const i=`https://ws.audioscrobbler.com/2.0/?method=track.getsimilar&track=${e}&artist=${n}&api_key=${Z}&limit=${o}&format=json&autocorrect=1`;return fetch(i,{method:"GET",mode:"cors",cache:"default"}).then(a=>a.json().then(f=>f)).catch(a=>se(a.message))}function oe(e,n){u.innerHTML="";let o=[...new Set(e)];for(let i=o.length;i>n;i--)o.shift();return o}function ie(e){let n=document.createElement("option");n.value=`${e.name},${e.artist}`,n.text=`${e.name} from ${e.artist}`,n.setAttribute("id",`${e.name}-${e.artist}`),u.appendChild(n)}function se(e){let n=document.createElement("option");n.text="music not found",console.warn(e),u.appendChild(n)}function j(e){return e.replaceAll(" ","+")}function k(e){e.setAttribute("hidden","hidden")}function P(e){e.removeAttribute("hidden","hidden")}function ae(e,n){if(n==z.first){let o=Object.values(e)[0],i=Object.values(o)[0],c=[];return Object.keys(i).map(function(a){let f={name:i[a].name,artist:i[a].artist.name};c.push(f)}),c}}function ce(e,n){let o=[...new Set(e)];for(let i=o.length;i>n;i--)o.shift();if(e==null||!e)throw"list indefinied";return o}async function Q(e){k(d),l.value=`${e.name}`;try{const n=await re(j(e.name),j(e.artist),5);let o=ce(ae(n,z.first,5),5);console.log(o)}catch(n){console.error(n)}}function le(e){let n=e.split(""),o=[];for(let i=0;i<n.length;i++)n[i]!=" "&&o.push(n[i]);return o}function V(e){return!(e==null||e==null)}function R(e){if(V(e)==!1)return!1;{let n=[];return n=le(e),n.length!=0}}u.addEventListener("change",function(){let n=u.value.split(","),o={name:n[0],artist:n[1]};Q(o)});l.addEventListener("keypress",e=>{if(e.key==="Enter")if(V(l.value)==!1){let n=document.createElement("option");n.text="empty",u.appendChild(n)}else{let o=u[0].value.split(","),i={name:o[0],artist:o[1]};Q(i)}});l.addEventListener("focus",e=>{R(l.value)==!0&&(u.childElementCount==0?ee(j(l.value),5):P(d))});I.addEventListener("clickout",e=>{k(d)});I.addEventListener("mouseover",e=>{R(l.value)==!0&&P(d)});I.addEventListener("mouseout",e=>{k(d)});l.addEventListener("input",e=>{R(l.value)==!1?k(d):(P(d),K(j(l.value),5))});
